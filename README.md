# yao_yi_yao

一款轻量的本地彩票号码生成与模拟工具（Flutter 应用）。

本文档包含：应用简介、功能说明、快速使用方法、开发与调试提示，以及常见问题。

## 应用简介

`yao_yi_yao` 是一个用于生成和彩民模拟的彩票工具。它提供号码随机生成、复式（多选）配置、批量模拟命中次数统计和本地最小命中次数记录等实用功能，适合用于学习、娱乐或概率试验。

支持的玩法（内置规则）：
- 双色球（红球 1-33，开奖 6 个；蓝球 1-16，开奖 1 个）
- 大乐透（前区 1-35，开奖 5 个；后区 1-12，开奖 2 个）

同时支持“复式玩法”：用户可以在主区/副区选择多于开奖个数的号码，自动/并发模拟将按复式规则判断命中（即：若开奖号码的每个球都被你的选号集合覆盖，则认为命中）。

## 主要功能

- 玩法选择：双色球 / 大乐透
- 自定义复式：可选择主区与副区的选号个数（高于开奖个数）
- 随机填充：按当前玩法与选定个数生成随机不重复号码
- 单次模拟：输入目标号码后，模拟直到遇见该组合或达到最大尝试次数
- 自动模拟：批量随机生成目标组合并分别模拟（支持并发），统计平均/最小尝试次数
- 历史最小次数：本地记录每组命中的最小尝试次数（最多保留 100 条），并可复制/删除
- 费用估算：对复式组合自动计算注数与费用（单注 2 元），区分双色球和大乐透

## 快速开始（开发者 / 在 Windows PowerShell 下运行）

先确保已安装 Flutter 开发环境并配置了 Windows、Android 或其它目标平台。

1. 获取代码（你已经在本地工作区）：

2. 进入项目目录并获取依赖：

```powershell
cd D:\flutter\speedMathTool\yao_yi_yao\yao_yi_yao
flutter pub get
```

3. 运行应用（连接模拟器或使用桌面/浏览器目标）：

```powershell
# 运行到 Windows 桌面
flutter run -d windows

# 或运行到 Web
flutter run -d chrome
```

4. 在应用中：
- 打开“号码模拟器”页面，选择玩法和主/副区个数。
- 点击“随机填充”查看示例号码。
- 可填入自选号码后点击“开始模拟”进行单次模拟，或使用“自动 100 组 / 并发自动 100 组(4)”进行批量模拟，结果会在状态区与历史列表展示。

## 开发者说明 / 代码结构（简要）

- `lib/pages/lottery_page.dart`：主页面，展示即时生成号码与历史记录入口。
- `lib/pages/lottery_simulation_page.dart`：号码模拟器，包含玩法选择、复式个数选择、随机填充与自动模拟逻辑（使用 isolate 并发）。
- `lib/widgets/`：各类 UI 组件，例如输入区、操作按钮行、状态显示、历史记录列表等。
- `lib/utils/`：工具函数：
	- `lottery_simulation_isolate.dart`：供 isolate 执行模拟的入口与逻辑
	- `random_unique_numbers.dart`：随机不重复号码生成工具
	- `min_attempts_store.dart`：内存存储最小命中次数记录
	- `bet_cost.dart`：复式注数与费用计算（已添加）

## 设计注意点与限制

- 模拟采用蒙特卡洛式随机生成并比较，可能非常耗时（尤其是大复式组合）。为避免无限运行，已设置最大尝试次数上限（示例中为 100,000,000）。
- `MinAttemptsStore` 当前为内存实现，应用重启后数据会丢失；可根据需要替换为持久化方案（如 shared_preferences 或本地数据库）。
- 费用计算采用组合数学计算，使用 BigInt 以避免中间溢出。

## 常见问题

- Q: 复式模式下注数怎么算？
	- A: 双色球注数为 C(红选个数,6) * C(蓝选个数,1)；大乐透注数为 C(前区选个数,5) * C(后区选个数,2)。单注价格 2 元。

- Q: 自动模拟结果如何解读？
	- A: 自动模拟会对多组随机生成的目标分别运行独立的模拟，最终会汇总平均尝试次数与命中次数，方便做概率统计或性能测试。


